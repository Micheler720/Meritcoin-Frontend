{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/media/michele/Acer/Users/miche/Desktop/PROJETOS/meritial/web/src/pages/SigIn/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useState } from 'react';\nimport * as Yup from 'yup';\nimport { Form } from '@unform/web';\nimport { FiLock, FiMail } from 'react-icons/fi';\nimport { useHistory } from 'react-router-dom';\nimport Input from '../../components/Input';\nimport { Container, Content, Background } from './styles';\nimport getValidationErrors from '../../util/getValidationErrors';\nimport Button from '../../components/Button';\nimport { useAuth } from '../../hooks/auth';\nimport { useToast } from '../../hooks/toast';\n\nconst SigIn = () => {\n  _s();\n\n  const formRef = useRef(null);\n  const {\n    signIn\n  } = useAuth();\n  const {\n    addToast\n  } = useToast();\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n  const handleSubmit = useCallback(async data => {\n    var _formRef$current;\n\n    setIsLoading(true);\n    (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.setErrors({});\n\n    try {\n      const schema = Yup.object().shape({\n        email: Yup.string().email('Digite um email válido').required('Obrigatório informar o e-mail'),\n        password: Yup.string().required('Obrigatório informar a senha')\n      });\n      await schema.validate(data, {\n        abortEarly: false\n      });\n      const {\n        email,\n        password\n      } = data;\n      await signIn({\n        email,\n        password\n      });\n      addToast({\n        title: 'Usuario autenticado com sucesso.',\n        type: 'success'\n      });\n      history.push('/dashboard');\n    } catch (err) {\n      if (err instanceof Yup.ValidationError) {\n        var _formRef$current2;\n\n        const errors = getValidationErrors(err);\n        (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.setErrors(errors);\n        return;\n      }\n\n      addToast({\n        type: 'error',\n        description: 'Ocorreu um erro ao fazer login, cheque as crendenciais.',\n        title: 'Erro na autenticação'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }, [signIn, history, addToast]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Content, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Fa\\xE7a seu Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        ref: formRef,\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          name: \"email\",\n          placeholder: \"E-mail\",\n          icon: FiMail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Senha\",\n          type: \"password\",\n          name: \"password\",\n          icon: FiLock\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          buttonType: \"success\",\n          type: \"submit\",\n          loading: isLoading,\n          eventLoading: \"Entrando...\",\n          children: \"Entrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"password-forgot\",\n        children: \" Esqueci minha senha\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SigIn, \"kvX+Y4vTOiRtw/Fv7UZyS7zvOjs=\", false, function () {\n  return [useAuth, useToast, useHistory];\n});\n\n_c = SigIn;\nexport default SigIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SigIn\");","map":{"version":3,"sources":["/media/michele/Acer/Users/miche/Desktop/PROJETOS/meritial/web/src/pages/SigIn/index.tsx"],"names":["React","useCallback","useRef","useState","Yup","Form","FiLock","FiMail","useHistory","Input","Container","Content","Background","getValidationErrors","Button","useAuth","useToast","SigIn","formRef","signIn","addToast","history","isLoading","setIsLoading","handleSubmit","data","current","setErrors","schema","object","shape","email","string","required","password","validate","abortEarly","title","type","push","err","ValidationError","errors","description"],"mappings":"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","sourcesContent":["import { FormHandles } from '@unform/core';\nimport React, { useCallback, useRef, useState } from 'react';\nimport * as Yup from 'yup';\nimport { Form } from '@unform/web';\nimport { FiLock, FiMail } from 'react-icons/fi';\nimport { useHistory } from 'react-router-dom';\nimport Input from '../../components/Input';\nimport { Container, Content, Background } from './styles';\nimport getValidationErrors from '../../util/getValidationErrors';\nimport Button from '../../components/Button';\nimport { useAuth } from '../../hooks/auth';\nimport { useToast } from '../../hooks/toast';\n\ninterface SigInFormData {\n  email: string;\n  password: string;\n}\n\nconst SigIn: React.FC = () => {\n  const formRef = useRef<FormHandles>(null);\n  const { signIn } = useAuth();\n  const { addToast } = useToast();\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = useCallback(\n    async (data: SigInFormData) => {\n      setIsLoading(true);\n      formRef.current?.setErrors({});\n      try {\n        const schema = Yup.object().shape({\n          email: Yup.string()\n            .email('Digite um email válido')\n            .required('Obrigatório informar o e-mail'),\n          password: Yup.string().required('Obrigatório informar a senha'),\n        });\n        await schema.validate(data, {\n          abortEarly: false,\n        });\n        const { email, password } = data;\n        await signIn({ email, password });\n        addToast({\n          title: 'Usuario autenticado com sucesso.',\n          type: 'success',\n        });\n\n        history.push('/dashboard');\n      } catch (err) {\n        if (err instanceof Yup.ValidationError) {\n          const errors = getValidationErrors(err);\n          formRef.current?.setErrors(errors);\n          return;\n        }\n\n        addToast({\n          type: 'error',\n          description:\n            'Ocorreu um erro ao fazer login, cheque as crendenciais.',\n          title: 'Erro na autenticação',\n        });\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [signIn, history, addToast],\n  );\n  return (\n    <Container>\n      <Content>\n        <h1>Faça seu Login</h1>\n        <Form ref={formRef} onSubmit={handleSubmit}>\n          <Input name=\"email\" placeholder=\"E-mail\" icon={FiMail} />\n          <Input\n            placeholder=\"Senha\"\n            type=\"password\"\n            name=\"password\"\n            icon={FiLock}\n          />\n          <Button\n            buttonType=\"success\"\n            type=\"submit\"\n            loading={isLoading}\n            eventLoading=\"Entrando...\"\n          >\n            Entrar\n          </Button>\n        </Form>\n        <a href=\"password-forgot\"> Esqueci minha senha</a>\n      </Content>\n      <Background />\n    </Container>\n  );\n};\n\nexport default SigIn;\n"]},"metadata":{},"sourceType":"module"}